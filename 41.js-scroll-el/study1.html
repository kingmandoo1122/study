<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>scroll_엘리베이터</title>
    <link rel="stylesheet" href="./css/study1.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="./js/stydy1.js"></script>
</head>
<body> 
    
    <div class="wrap">
        <div class="banner"></div>
        <div class="building">
            <div class="elv">
                <span class="per">0</span>
                <div class="state_bar">
                    <div class="cur_bar"></div>
                </div>

                <div class="station">
                    <ul class="train">
                        <li><img src="./img/bird.png" alt="버드">
                        <div class="floating_box">
                            <h4>bird</h4>
                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus, dolorem eos. Porro sed quia veritatis. Necessitatibus vitae excepturi reiciendis cum corporis fugiat ea delectus suscipit saepe sint. Id, eveniet tempora?</p>
                        </div></li>
                        <li><img src="./img/cat1 (1).jpg" alt="캣1"><div class="floating_box">
                            <h4>cat</h4>
                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus, dolorem eos. Porro sed quia veritatis. Necessitatibus vitae excepturi reiciendis cum corporis fugiat ea delectus suscipit saepe sint. Id, eveniet tempora?</p>
                        </div></li>
                        <li><img src="./img/cat2.jpg" alt="캣"><div class="floating_box">
                            <h4>cat2</h4>
                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus, dolorem eos. Porro sed quia veritatis. Necessitatibus vitae excepturi reiciendis cum corporis fugiat ea delectus suscipit saepe sint. Id, eveniet tempora?</p>
                        </div></li>
                        <li><img src="./img/dog.jpg" alt="독"><div class="floating_box">
                            <h4>dog</h4>
                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus, dolorem eos. Porro sed quia veritatis. Necessitatibus vitae excepturi reiciendis cum corporis fugiat ea delectus suscipit saepe sint. Id, eveniet tempora?</p>
                        </div></li>
                        <li><img src="./img/duck.jpg" alt="덕"><div class="floating_box">
                            <h4>duck</h4>
                            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus, dolorem eos. Porro sed quia veritatis. Necessitatibus vitae excepturi reiciendis cum corporis fugiat ea delectus suscipit saepe sint. Id, eveniet tempora?</p>
                        </div></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="contents"></div>
    </div>


    <script>
        let scrtop = 0 
    
            console.log(document.querySelector(".building").offsetHeight)
    
    
    
        $(window).scroll(function(){
            let elv_height = $(".elv").height()
            let building_top = $(".building").offset().top
            let building_height = $(".building").height()
            let ani_length = building_height - elv_height
            let distance = scrtop - building_top
            let ani_per = distance / ani_length * 100
            let height = $(".contents").offset().top - elv_height
            // console.log(ani_per)


           

            let num = ani_per/20 //20 = 100 나누기 5(슬라이드갯수)
            let idx = Math.floor(num) // 0,1,2,3,4
            let iper = Math.round((num - idx)*100)
           
            // distance<ani_length
            console.log($(".contents").offset().top)
    
            scrtop = $(window).scrollTop() 

            if(distance<0){
                $(".elv").removeClass("fixed")
                $(".elv").removeClass("bottom")
            }
    
    
            if (distance>=0 && distance<ani_length){
            $(".elv").addClass("fixed")
            $(".elv").removeClass("bottom")
            $(".cur_bar").css("width",`${ani_per}%`)
            $(".per").html(`엘리베이터가 ${Math.round(ani_per*10)/10}% 만큼 진행되고 있습니다.
            현재 ${idx + 1} 번째 슬라이드는 ${iper}% 만큼 진행되고 있습니다.
            `)
            $(".train").css("transform",`translateX(${-ani_per}%)`)
            console.log(`현재 ${idx + 1} 번째 슬라이드가 ${iper}% 만큼 진행되고 있습니다.`)
            // $(".train>li").eq(0).children.css("transform",`translateX(${iper}%)`)
    
    
    
    
            }
    
            if(distance > ani_length){
                $(".elv").removeClass("fixed")
                $(".elv").addClass("bottom")
            }
        }
        )
    
        </script>
</body>
</html>